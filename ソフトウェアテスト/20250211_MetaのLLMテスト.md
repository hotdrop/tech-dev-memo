# Revolutionizing software testing: Introducing LLM-powered bug catchers
- URL: https://engineering.fb.com/2025/02/05/security/revolutionizing-software-testing-llm-powered-bug-catchers-meta-ach/

論文は以下から読める。
- https://arxiv.org/pdf/2501.12862
- タイトル: Mutation-Guided LLM-based Test Generation at Meta

# ACHとは？
Metaの`Automated Compliance Hardening` (ACH) はLLMを活用したテスト生成システムでミューテーション（コード変異）をガイドにしたテストを自動生成する。このシステムは、特定の関心領域（例えばプライバシー）に関連するバグ（ミュータント）を意図的にコードに挿入し、それを検出するテストを生成することで回帰バグ（regression）を防ぎ、コードベースの堅牢性を高めるもの。
Metaは**LLMを活用した「バグを見つけるためのテスト生成」**を実現しようとしており、従来のコードカバレッジベースのアプローチとは違って特定のバグパターンに着目したテストを作れる。
`Assured LLM-based Software Engineering`の原則に基づいており「生成されたテストがバグを確実に検出する」という検証可能な保証を提供するようだ。

- ACHはユニットテストを自動生成し、特定のバグをターゲットにする
- テストの対象となるバグの説明は自然言語で行う。記述が不完全だったり、矛盾があっても機能する。
- これまでの自動テスト生成技術は主にコードカバレッジを増やすことが目的だったが、ACHは特定のバグを見つけることを主眼に置いている。
- `Assured LLM-based Software Engineering`の原則に基づいており、「生成されたテストがバグを確実に検出する」という検証可能な保証を提供する。

# 仕組み
ACHの核となるのは`mutation testing`「コードに意図的にバグ（ミュータント）を埋め込み既存のテストがそれを検出できるか評価する」という手法。従来の`mutation testing`は運用が難しく以下のような問題があって広く普及しなかった。

1. ルールベースのミュータント生成
   1. 自動的にバグ（ミュータント）を挿入できるが、現実的なバグとは異なるため本当に重要なバグを検出できない。
2. テストの手書きが必要
   1. たとえミュータントを自動で作成できたとしても、それを捕まえるテストは人間が手作業で書かなければなず非常に手間がかかってしまう
3. テストの保証がない
   1. 手書きのテストを作ったとしてもそれが本当にミュータントを検出できるかは分からない。

ACHはLLM（大規模言語モデル）を活用し、この課題を解決してくれるとのこと。

- 現実的なバグ（ミュータント）を生成可能
- 人間の手を介さずに、それを検出するテストも自動生成
- テストの効果を検証し、確実にバグをキャッチする

つまり、ACHは`mutation testing`の自動化をLLMで強化し「バグを作る&それを見つけるテストを作る」という2つの作業を同時に解決する。

LLMが解決したこと
-	確率的（probabilistic）なアプローチにより、厳密なルールなしにバグやテストを生成できる
-	「バグを作る」＆「それをキャッチするテストを作る」両方を同時に解決できる
-	スケーラブルで高精度なミューテーションテストを実現

ACHの手法によって、ソフトウェアエンジニアは過去のバグ、同僚の意見、ユーザー要求、規制要件など、さまざまな情報源から課題を吸い上げ、それを自然言語で書くだけで実際のバグ検出テストに変換できるようになった。

ACHの動作の流れ
1. エンジニアが「どんなバグが心配か」を説明: 自然言語で 「こういうバグを防ぎたい」と記述
2. ACHがその説明を基に、多数のバグ（ミュータント）を自動生成: 生成されるバグは、実際のシステムで問題になりそうなもの
3. ACHがそのバグを検出するためのテストを自動生成: LLMを活用して、確実にバグをキャッチするテストを作成

## Metaでの活用事例
以下のような主要プラットフォームで適用されているようだ。
- Facebook Feed
- Instagram
- Messenger
- WhatsApp

Metaは、LLMによるミュータント生成とテスト生成を組み合わせた手法をさらに多くの技術的ワークフローに適用しようと考えており、今後は業界全体にLLMを活用した自動テストの普及を促すことを目指しているとのこと。

- 適用範囲の拡大
- 生成されたミュータントの関連性を評価する新しい手法の開発
- 既存のバグ検出能力の向上

# まとめ
- ACHは、LLMを活用した新しいミューテーションテストアプローチ
- バグを自動で生成し、それを検出するテストも自動生成する仕組み
- 開発者の負担を減らし、スケーラブルで高精度なテストを実現
- 今後、リスク評価の自動化・適用範囲の拡大を進める予定
